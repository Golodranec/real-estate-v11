<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Каталог недвижимости — v13.9</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <!-- MarkerCluster -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />

  <link rel="stylesheet" href="style.css?v=13.9" />
</head>
<body>
  <header class="topbar">
    <h1>Каталог недвижимости</h1>
    <div class="version">ChatPatch v13.9</div>
    <a class="admin-link" href="admin.html" target="_blank">Админка</a>
  </header>

  <!-- Фильтры (строятся скриптом) -->
  <section class="filters card" id="filtersBox">
    <div id="adminSyncInfo" class="hint" style="grid-column:1/-1;"></div>
    <div id="dynamicParamsFilters" class="params-box" style="grid-column:1/-1;"></div>
    <div id="scriptStatus" class="hint" style="grid-column:1/-1; color:#ffd24d;">⏳ Загружается…</div>
  </section>

  <section id="mapContainer" class="card"><div id="map"></div></section>
  <section id="results" class="card"><div id="resultsList" class="grid"></div></section>

  <!-- Форма «Добавить объект» (строится частично скриптом) -->
  <section class="card">
    <h2 id="formTitle">Добавить объект</h2>
    <form id="objectForm" autocomplete="off">
      <div id="dynamicLocationForm" class="form-row"></div>

      <div class="form-row">
        <select id="form_status">
          <option value="sale">Продается</option>
          <option value="rent">Сдается</option>
          <option value="exchange">Обмен</option>
        </select>
        <input id="title" type="text" placeholder="Название" />
        <input id="address" type="text" placeholder="Адрес" />
      </div>

      <div class="form-row">
        <div class="range">
          <input id="price" type="number" placeholder="Цена" />
          <input id="area" type="number" step="0.1" placeholder="Площадь" />
        </div>
        <div class="range">
          <input id="rooms" type="number" placeholder="Комнаты" />
          <input id="year" type="number" placeholder="Год" />
        </div>
        <div class="range">
          <input id="floor" type="number" placeholder="Этаж" />
          <input id="floors" type="number" placeholder="Этажность" />
        </div>
      </div>

      <div id="dynamicParamsForm" class="params-box"></div>

      <div class="form-row">
        <button id="pickOnMap" type="button" class="btn">Поставить точку на карте</button>
        <span id="coordsBadge" class="badge muted">Координаты не выбраны</span>
        <input id="images" type="file" accept="image/*" multiple />
      </div>
      <div id="imagePreview" class="preview"></div>

      <div class="form-actions">
        <button type="submit" class="btn primary">Сохранить</button>
        <button id="clearForm" type="button" class="btn danger ghost">Очистить</button>
      </div>
    </form>
  </section>

  <footer class="footer">Версия: ChatPatch v13.9</footer>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
  <script src="script.js?v=13.9"></script>
</body>
</html>
